<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>RidgePlot.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/jkanche/ridges.js" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Classes</h3><ul><li><a href="HorizontalRidgePlot.html">HorizontalRidgePlot</a><ul class='methods'><li data-type='method' style='display: none;'><a href="HorizontalRidgePlot.html#attachResizeEvent">attachResizeEvent</a></li><li data-type='method' style='display: none;'><a href="HorizontalRidgePlot.html#render">render</a></li><li data-type='method' style='display: none;'><a href="HorizontalRidgePlot.html#resize">resize</a></li><li data-type='method' style='display: none;'><a href="HorizontalRidgePlot.html#savePlot">savePlot</a></li><li data-type='method' style='display: none;'><a href="HorizontalRidgePlot.html#setInput">setInput</a></li><li data-type='method' style='display: none;'><a href="HorizontalRidgePlot.html#setState">setState</a></li></ul></li><li><a href="HorizontalRidgePlot.exports.HorizontalRidgePlot.html">HorizontalRidgePlot.exports.HorizontalRidgePlot</a></li><li><a href="RidgePlot.html">RidgePlot</a><ul class='methods'><li data-type='method' style='display: none;'><a href="RidgePlot.html#attachResizeEvent">attachResizeEvent</a></li><li data-type='method' style='display: none;'><a href="RidgePlot.html#resize">resize</a></li><li data-type='method' style='display: none;'><a href="RidgePlot.html#savePlot">savePlot</a></li><li data-type='method' style='display: none;'><a href="RidgePlot.html#setInput">setInput</a></li></ul></li><li><a href="RidgePlot.exports.RidgePlot.html">RidgePlot.exports.RidgePlot</a></li><li><a href="VerticalRidgePlot.html">VerticalRidgePlot</a><ul class='methods'><li data-type='method' style='display: none;'><a href="VerticalRidgePlot.html#attachResizeEvent">attachResizeEvent</a></li><li data-type='method' style='display: none;'><a href="VerticalRidgePlot.html#render">render</a></li><li data-type='method' style='display: none;'><a href="VerticalRidgePlot.html#resize">resize</a></li><li data-type='method' style='display: none;'><a href="VerticalRidgePlot.html#savePlot">savePlot</a></li><li data-type='method' style='display: none;'><a href="VerticalRidgePlot.html#setInput">setInput</a></li><li data-type='method' style='display: none;'><a href="VerticalRidgePlot.html#setState">setState</a></li></ul></li><li><a href="VerticalRidgePlot.exports.VerticalRidgePlot.html">VerticalRidgePlot.exports.VerticalRidgePlot</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">RidgePlot.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Base class for ridge plots.
 * This class is not to be used directly.
 *
 * @class RidgePlot
 */
export class RidgePlot {
  /**
   * Creates an instance of BaseGL.
   * @param {string} selectorOrElement, a html dom selector or element.
   * @memberof RidgePlot
   */
  constructor(selectorOrElement) {
    this.elem = selectorOrElement;
    if (
      typeof selectorOrElement === "string" ||
      selectorOrElement instanceof String
    ) {
      this.elem = document.querySelector(selectorOrElement);
    }

    if (!(this.elem instanceof HTMLElement)) {
      throw `${selectorOrElement} is neither a valid dom selector nor an element on the page`;
    }

    this.data = null;
    this.state = {};
  }

  _check_for_data() {
    if (
      typeof this.data !== "object" ||
      Array.isArray(this.data) ||
      this.data === null ||
      this.data === undefined
    ) {
      throw `'data' is not a valid type! Must be an 'object' and cannot be 'null'.`;
    }
  }

  /**
   * Set the input data for the visualization.
   * The name of the object specifies the label and must contain
   * median, mean, min, max &amp; all values
   *
   * @param {object} data, input data to set
   * @memberof RidgePlot
   */
  setInput(data) {
    this.data = data;

    this._check_for_data();

    this._dentries = Object.entries(data).map((val) => [val[0], val[1]]);
    this._dkeys = this._dentries.map((x) => {
      return x[0];
    });
  }

  /**
   * resize the plot.
   * TODO: can do better at just resizing the SVG
   *
   * @param {number} width
   * @param {number} height
   * @memberof RidgePlot
   */
  resize(width, height) {
    this.render(width, height);
  }

  /**
   * Save the plot as SVG.
   * @param {String} filename name of the file to save the svg
   *
   * @memberof RidgePlot
   */
  savePlot(filename) {
    if (this.elem.querySelector("svg")) {
      let tmpsvg = this.elem.querySelector("svg").outerHTML;

      let tmpLink = document.createElement("a");
      tmpsvg = tmpsvg.replace(
        "&lt;svg",
        `&lt;svg viewbox="-20 -20 1200 280" xmlns="http://www.w3.org/2000/svg"`
      );
      let fileNew = new Blob([tmpsvg], {
        type: "text/svg",
      });

      tmpLink.href = URL.createObjectURL(fileNew);
      tmpLink.download = filename;
      tmpLink.click();

      tmpLink.remove();
    }
  }

  /**
   * Attach a callback for window resize events
   *
   * @memberof RidgePlot
   */
  attachResizeEvent() {
    var self = this;
    // set window timesize event once
    let resizeTimeout;
    window.addEventListener("resize", () => {
      // similar to what we do in epiviz
      if (resizeTimeout) {
        clearTimeout(resizeTimeout);
      }

      resizeTimeout = setTimeout(() => {
        self.resize(
          self.elem.parentNode.clientWidth,
          self.elem.parentNode.clientHeight
        );
      }, 500);
    });
  }

  _setTitleAndFooter(svg) {
    if ("title" in this.state) {
      svg
        .append("text")
        .attr("text-anchor", "center")
        .attr("x", 10)
        .attr("y", 0)
        .style("font-size", "14px")
        .style("font-weight", "bold")
        .text(this.state.title);
    }

    if ("footer" in this.state) {
      svg
        .append("text")
        .attr("text-anchor", "end")
        .attr("x", width)
        .attr("y", height + margin.bottom)
        .style("font-size", "10px")
        .style("font-style", "italic")
        .text(this.state.footer);
    }
  }
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on Wed Nov 01 2023 14:09:26 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
